{"name":"discord","strategy":"oauth2","options":{"authorizationURL":"https://discordapp.com/api/oauth2/authorize","tokenURL":"https://discordapp.com/api/oauth2/token","scope":"identify email","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  // call oauth2 APIwith the accesstoken and create the profile\n  request.get('https://discordapp.com/api/users/@me', {\n    headers: {\n      'Authorization': 'Bearer ' + accessToken\n    }\n  }, function(e, r, b) {\n    if (e) return cb(e);\n    if (r.statusCode !== 200) return cb(new Error('StatusCode: ' + r.statusCode));\n    var dUser = JSON.parse(b);\n    var profile = {};\n    profile.user_id = dUser.id;\n    profile.nickname = dUser.username;\n    profile.email = dUser.email;\n    profile.picture = \"https://cdn.discordapp.com/avatars/\" + dUser.id + \"/\" + dUser.avatar;\n    cb(null, profile);\n  });\n}"}}}