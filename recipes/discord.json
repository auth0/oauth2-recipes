{"name":"discord","strategy":"oauth2","options":{"authorizationURL":"https://discordapp.com/api/oauth2/authorize","tokenURL":"https://discordapp.com/api/oauth2/token","scope":"email","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  request.get('https://discordapp.com/api/users/@me', {\n    headers: {\n      'Authorization': 'Bearer ' + accessToken\n    }\n  }, function(err, r, body) {\n    if (err) {\n      return cb(err);\n    }\n    if (r.statusCode !== 200) {\n      return cb(new Error('StatusCode: ' + r.statusCode));\n    }\n    try {\n      var profile = JSON.parse(body);\n      profile.name = profile.username;\n      profile.nickname = profile.username;\n      profile.email_verified = profile.verified;\n      if (profile.avatar) {\n        profile.picture = 'https://cdn.discordapp.com/avatars/' + profile.id + '/' + profile.avatar + '.jpg';\n        delete profile.avatar;\n      };\n      delete profile.verified;\n      delete profile.username;\n      return cb(null, profile);\n    } catch (err) {\n      cb(err);\n    }\n  });\n}"}}}