{"name":"pinterest","strategy":"oauth2","options":{"authorizationURL":"https://api.pinterest.com/oauth","tokenURL":"https://api.pinterest.com/v1/oauth/token","scope":"read_public, write_public, read_relationships","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  request.get('https://api.pinterest.com/v1/me/?fields=first_name%2Cid%2Clast_name%2Cimage%2Cusername', {\n    headers: {\n      'Authorization': 'Bearer ' + accessToken\n    }\n  }, function(e, r, b) {\n    if (e) return cb(e);\n    if (r.statusCode !== 200) return cb(new Error('StatusCode: ' + r.statusCode));\n    var body = JSON.parse(b);\n    var profile = body.data;\n    var images = profile.image || {};\n    var userPicture;\n\n    for (var key in images) {\n      if (images[key] && images[key].url) {\n        userPicture = images[key].url;\n        break;\n      }\n    }\n\n    cb(null, {\n      user_id: profile.id,\n      family_name: profile.last_name,\n      given_name: profile.first_name,\n      picture: userPicture,\n      name: profile.first_name + ' ' + profile.last_name,\n      nickname: profile.username\n    });\n  });\n}"}}}