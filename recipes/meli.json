{"name":"meli","strategy":"oauth2","options":{"authorizationURL":"http://auth.mercadolibre.com.ar/authorization","tokenURL":"https://api.mercadolibre.com/oauth/token","scope":"read, offline","scripts":{"fetchUserProfile":"function(accessToken, ctx, callback) {\n\n  function capitalize(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  request.get('https://api.mercadolibre.com/users/' + ctx['user_id'] + '?access_token=' + accessToken, {\n    'headers': {\n      'User-Agent': 'Auth0'\n    }\n  }, function(e, r, plainUser) {\n    if (e) return cb(e);\n    if (r.statusCode !== 200) return callback(new Error('StatusCode:' + r.statusCode));\n    var b = JSON.parse(plainUser);\n\n    var profile = {\n      user_id: b['id'],\n      name: capitalize(b['first_name']) + ' ' + capitalize(b['last_name']),\n      given_name: capitalize(b['first_name']),\n      family_name: capitalize(b['last_name']),\n      email: b['email'],\n      nickname: b['nickname'],\n      context: {\n        id: ctx['user_id'],\n        access_token: accessToken\n      }\n    };\n\n    callback(null, profile);\n  });\n}"}}}