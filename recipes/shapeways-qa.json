{"name":"shapeways-qa","strategy":"oauth2","options":{"authorizationURL":"https://www.qa1.ehv.shapeways.net/design/oauth/authorize","tokenURL":"https://www.qa1.ehv.shapeways.net/design/oauth/token","scope":"openid","scripts":{"fetchUserProfile":"function(access_token, ctx, cb) {\n  var crypto = require(\"crypto\");\n\n  request.get(\"https://www.qa1.ehv.shapeways.net/design/api/userinfo\", {\n    headers: {\n      'Authorization': 'Bearer ' + access_token\n    }\n  }, function(e, r, b) {\n    if (e) return cb(e);\n    if (r.statusCode !== 200) return cb(new Error('StatusCode: ' + r.statusCode));\n    var profile = JSON.parse(b);\n    var hash = crypto.createHash('md5').update(profile.email).digest('hex');\n    cb(null, {\n      email_verified: true,\n      email: profile.email,\n      user_id: hash,\n      name: profile.name,\n      sw_token: access_token,\n    });\n  });\n}"}}}