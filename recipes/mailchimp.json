{"name":"mailchimp","strategy":"oauth2","options":{"authorizationURL":"https://login.mailchimp.com/oauth2/authorize","tokenURL":"https://login.mailchimp.com/oauth2/token","scope":"","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  var auth = new Buffer('NA:' + accessToken).toString('base64')\n  var url = 'https://login.mailchimp.com/oauth2/metadata'\n\n  request.get(url, {\n    headers: {\n      'Authorization': 'Bearer ' + accessToken\n    }\n  },\n\tfunction (err, resp) {\n\t  if (err) { return cb(err) }\n\n  \tif (resp.statusCode !== 200) {\n\t\t\treturn cb(new Error(\n\t\t\t\t'StatusCode:' + resp.statusCode +\n\t\t\t\t' Body:' + resp.body\n\t\t\t))\n    }\n\n    var user = JSON.parse(resp.body)\n\n    user.picture = user.login.avatar\n    user.name = user.accountname\n\n  \tcb(null, user)\n\t})\n}"}}}