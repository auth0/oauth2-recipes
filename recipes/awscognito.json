{"name":"awscognito","strategy":"oauth2","options":{"authorizationURL":"https://zamd.auth.eu-west-2.amazoncognito.com/oauth2/authorize","tokenURL":"https://zamd.auth.eu-west-2.amazoncognito.com/oauth2/token","scope":"openid profile","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n\n  console.log('starting profile fetch');\n  const userInfoEndpoint = 'https://zamd.auth.eu-west-2.amazoncognito.com/oauth2/userInfo';\n\n  request.get(userInfoEndpoint, {\n      headers: {\n        'Authorization': 'Bearer ' + accessToken,\n      },\n      json: true\n    },\n\n    function(e, r, profile) {\n      if (e) return cb(e);\n      if (r.statusCode !== 200) return cb(new Error('StatusCode: ' + r.statusCode));\n      profile.user_id = profile.sub\n      cb(null, profile);\n    });\n}"}}}