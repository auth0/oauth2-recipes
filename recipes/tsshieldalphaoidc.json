{"name":"tsshieldalphaoidc","strategy":"oauth2","options":{"authorizationURL":"https://tsshield-alpha.tierraservice.com/oidcprovider/oauth2/authorize","tokenURL":"https://tsshield-alpha.tierraservice.com/oidcprovider/oauth2/token","scope":"","scripts":{"fetchUserProfile":"function(accessToken, ctx, callback) {\n  // call TSshield UserInfo with the accesstoken \n  // to retrieve user profile\n  // and create the Auth0 profile\n  request.get({\n    // url: 'http://tsshieldrs.getsandbox.com/oidcprovider/oauth2/userinfo',\n    url: 'https://tsshield-alpha.tierraservice.com/oidcprovider/oauth2/userinfo',\n    headers: {\n      Authorization: 'Bearer ' + accessToken\n    },\n    json: true\n  }, function(e, res, json) {\n    if (e)\n      return callback(e);\n    if (res.statusCode !== 200)\n      return callback(new Error('UserInfo call StatusCode:' + res.statusCode));\n    var userInfo = json;\n    var customClaims = userInfo.claims;\n\n    var profile = {\n      tsShieldCompany: customClaims.companyProfile,\n      tsShieldUser: customClaims.userProfile,\n      name: userInfo.name,\n      nickname: userInfo.nickname,\n      email: userInfo.email,\n      given_name: userInfo.given_name,\n      family_name: userInfo.family_name,\n      user_id: userInfo.sub\n    };\n    callback(null, profile);\n  });\n}"}}}