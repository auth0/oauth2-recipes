{"name":"strava","strategy":"oauth2","options":{"authorizationURL":"https://www.strava.com/oauth/authorize","tokenURL":"https://www.strava.com/oauth/token","scope":"write","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  request.get('https://www.strava.com/api/v3/athlete', {\n    headers: {\n      'Authorization': 'Bearer ' + accessToken\n    }\n  }, function(e, r, b) {\n    if (e) return cb(e);\n    if (r.statusCode !== 200) return cb(new Error('StatusCode: ' + r.statusCode));\n    var profile = JSON.parse(b);\n    cb(null, {\n      user_id: profile.id,\n      family_name: profile.lastname,\n      given_name: profile.firstname,\n      picture: profile.profile,\n      country: profile.country,\n      email: profile.email,\n      city: profile.city,\n      user_metadata : {\n        gender: profile.sex,\n        weight: profile.weight,\n        date_preference: profile.date_preference,\n      \tmeasurement_preference: profile.measurement_preference\n      }\n    });\n  });\n}"}}}