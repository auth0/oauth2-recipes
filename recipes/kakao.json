{"name":"kakao","strategy":"oauth2","options":{"authorizationURL":"https://kauth.kakao.com/oauth/authorize","tokenURL":"https://kauth.kakao.com/oauth/token","scope":"account_email","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  request.get('https://kapi.kakao.com/v2/user/me', {\n      headers: {\n        'Authorization': 'Bearer ' + accessToken\n      }\n    },\n    function(err, r, body) {\n      if (err) {\n        return cb(err);\n      }\n      if (r.statusCode !== 200) return cb(new Error(body));\n\n      try {\n        var profile = JSON.parse(body);\n        profile.provider = 'kakao';\n        profile.id = profile.id;\n        if (profile.properties) {\n          profile.name = profile.properties.nickname;\n          profile.nickname = profile.properties.nickname;\n          profile.displayName = profile.properties.nickname;\n          profile.picture = profile.properties.thumbnail_image;\n        }\n        if (profile.kakao_account) {\n          profile.email = profile.kakao_account.email;\n        }\n        cb(null, profile);\n      } catch (e) {\n        cb(e);\n      }\n    });\n\n\n}"}}}