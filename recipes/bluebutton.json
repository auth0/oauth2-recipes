{"name":"bluebutton","strategy":"oauth2","options":{"authorizationURL":"https://sandbox.bluebutton.cms.gov/v1/o/authorize/","tokenURL":"https://sandbox.bluebutton.cms.gov/v1/o/token/","scope":"profile patient/Patient.read patient/ExplanationOfBenefit.read patient/Coverage.read","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  request.get(\"https://sandbox.bluebutton.cms.gov/v1/connect/userinfo\", {\n    headers: {\n      Authorization: \"Bearer \" + accessToken\n    }\n  }, function(e, r, b) {\n    if (e) return cb(e);\n    if (r.statusCode !== 200) {\n      cb(new Error(\"Status code: \" + r.statusCode))\n    } else {\n      var profile = JSON.parse(b);\n      cb(null, {\n        user_id: profile.sub,\n        username: profile.prefered_username,\n        name: profile.name,\n        email: profile.email,\n        app_metadata: {\n          bluebutton_patient_id: profile.patient\n        }\n      });\n    }\n  });\n}"}}}